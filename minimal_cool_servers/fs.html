<!-- author: edwinliang 20230128 -->
<div style="color:blueviolet">Minimal Scriptable-FileIO Server V0.2</div>
<code>
    <br>
    // you can use any fs module function :)<br>
    // please copy and paste code to textarea & press ctrl + r to test <br><br>
    fs.writeFileSync('test.txt', 'hello world', { encoding: 'utf-8' }); // create test.txt file <br>
    fs.readFileSync('test.txt', { encoding: 'utf-8' }); // read test.txt file <br>
    fs.readdirSync('.'); // read current directory <br>
    fs.unlink('test.txt', () => { }); // delete test.txt <br><br>
</code>
<textarea>
console.log(fs.readdirSync('.'));
</textarea>
<div id="result"></div>
<style>
    body {
        background-color: #333;
        color: white;
    }

    textarea {
        background-color: gray;
        width: 100%;
        height: 50vh;
        border: none;
        outline: none;
    }
</style>
<script src="https://code.jquery.com/jquery-3.6.3.slim.min.js"></script>
<script>
    $(() => {
        $(document).bind("keypress", function (e) {
            if (e.code == 'KeyR' && e.ctrlKey) {
                fetch(`js?${JSON.stringify($('textarea').val().split('\n'))}`).then(r => r.text()).then(r => {
                    $("#result").html('');
                    $("#result").append(`<p>${new Date()}</p>`);
                    let results = JSON.parse(r);
                    results.forEach(result => {
                        $("#result").append('&gt; ' + result + '<br>');
                    });
                })
            }
        });
    })
</script>